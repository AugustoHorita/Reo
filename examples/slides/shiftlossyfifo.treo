section slides;

import reo.sync;
import reo.fifo1;
import reo.fifofull;
import reo.syncdrain;
import slides.xrouter;
import reo.sync;
import reo.syncdrain;
import reo.lossy;

shiftlossyfifo(in, out) {
  fifo1(in, b) fifo1(b, c) 
// xrouter(c, d, e)
  sync(c, s) syncdrain(s, m)
 lossy(s, x[1]) sync(x[1], m) sync(x[1], d)
 lossy(s, x[2]) sync(x[2], m) sync(x[2], e) 

  syncdrain(a, d) fifofull<0>(e, d) sync(e,out)
}
